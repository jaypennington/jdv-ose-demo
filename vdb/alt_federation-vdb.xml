<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<vdb name="alt_federation" version="1">
<description/>
<property name="validationDateTime" value="Thu Jun 29 18:17:13 EDT 2017"/>
<property name="validationVersion" value="9.0.0"/>
<model name="person_source">
<source connection-jndi-name="person_source_DS" name="person_source" translator-name="file"/>
<metadata type="DDL"><![CDATA[

CREATE FOREIGN PROCEDURE getTextFiles (
	IN pathAndExt string(4000) NOT NULL
) RETURNS
	TABLE (
		file clob,
		filePath string(4000)
) OPTIONS(UPDATECOUNT '1');

]]></metadata>
</model>
<model name="person_view" type="VIRTUAL">
<property name="imports" value="person_source"/>
<metadata type="DDL"><![CDATA[

CREATE VIEW person_table (
	SSN string(4000) OPTIONS(NAMEINSOURCE 'SSN', UPDATABLE 'FALSE'),
	Name string(4000) OPTIONS(NAMEINSOURCE 'Name', UPDATABLE 'FALSE'),
	Nationality string(4000) OPTIONS(NAMEINSOURCE 'Nationality', UPDATABLE 'FALSE'),
	DOB string(4000) OPTIONS(NAMEINSOURCE 'DOB', UPDATABLE 'FALSE')
) 
AS
	SELECT 
	A.SSN, A.Name, A.Nationality, A.DOB
FROM
	(EXEC person_source.getTextFiles('person-data.txt')) AS f, TEXTTABLE(file COLUMNS SSN string, Name string, Nationality string, DOB string  HEADER) AS A;

]]></metadata>
</model>
<model name="h2db_source">
<source connection-jndi-name="booboo_DS" name="h2db_source" translator-name="jdbc-simple"/>
<metadata type="DDL"><![CDATA[

CREATE FOREIGN TABLE ACCOUNT (
	ACCOUNT_ID integer NOT NULL OPTIONS(NAMEINSOURCE '"ACCOUNT_ID"', NATIVE_TYPE 'INTEGER', FIXED_LENGTH 'TRUE'),
	SSN string(10) OPTIONS(NAMEINSOURCE '"SSN"', NATIVE_TYPE 'CHAR', FIXED_LENGTH 'TRUE'),
	STATUS string(10) OPTIONS(NAMEINSOURCE '"STATUS"', NATIVE_TYPE 'CHAR', FIXED_LENGTH 'TRUE'),
	TYPE string(10) OPTIONS(NAMEINSOURCE '"TYPE"', NATIVE_TYPE 'CHAR', FIXED_LENGTH 'TRUE'),
	DATEOPENED timestamp OPTIONS(NAMEINSOURCE '"DATEOPENED"', NATIVE_TYPE 'TIMESTAMP', FIXED_LENGTH 'TRUE'),
	DATECLOSED timestamp OPTIONS(NAMEINSOURCE '"DATECLOSED"', NATIVE_TYPE 'TIMESTAMP', FIXED_LENGTH 'TRUE'),
	CONSTRAINT ACCOUNT_PK PRIMARY KEY(ACCOUNT_ID) OPTIONS(NAMEINSOURCE '"ACCOUNT_PK"')
) OPTIONS(NAMEINSOURCE '"ACCOUNTS"."PUBLIC"."ACCOUNT"', UPDATABLE 'TRUE');

CREATE FOREIGN TABLE CUSTOMER (
	SSN string(10) NOT NULL OPTIONS(NAMEINSOURCE '"SSN"', NATIVE_TYPE 'CHAR', FIXED_LENGTH 'TRUE'),
	FIRSTNAME string(64) OPTIONS(NAMEINSOURCE '"FIRSTNAME"', NATIVE_TYPE 'VARCHAR'),
	LASTNAME string(64) OPTIONS(NAMEINSOURCE '"LASTNAME"', NATIVE_TYPE 'VARCHAR'),
	ST_ADDRESS string(256) OPTIONS(NAMEINSOURCE '"ST_ADDRESS"', NATIVE_TYPE 'VARCHAR'),
	APT_NUMBER string(32) OPTIONS(NAMEINSOURCE '"APT_NUMBER"', NATIVE_TYPE 'VARCHAR'),
	CITY string(64) OPTIONS(NAMEINSOURCE '"CITY"', NATIVE_TYPE 'VARCHAR'),
	STATE string(32) OPTIONS(NAMEINSOURCE '"STATE"', NATIVE_TYPE 'VARCHAR'),
	ZIPCODE string(10) OPTIONS(NAMEINSOURCE '"ZIPCODE"', NATIVE_TYPE 'VARCHAR'),
	PHONE string(15) OPTIONS(NAMEINSOURCE '"PHONE"', NATIVE_TYPE 'VARCHAR'),
	CONSTRAINT CUSTOMER_PK PRIMARY KEY(SSN) OPTIONS(NAMEINSOURCE '"CUSTOMER_PK"')
) OPTIONS(NAMEINSOURCE '"ACCOUNTS"."PUBLIC"."CUSTOMER"', UPDATABLE 'TRUE');

CREATE FOREIGN TABLE PRODUCT (
	ID integer NOT NULL OPTIONS(NAMEINSOURCE '"ID"', NATIVE_TYPE 'INTEGER', FIXED_LENGTH 'TRUE'),
	SYMBOL string(16) OPTIONS(NAMEINSOURCE '"SYMBOL"', NATIVE_TYPE 'VARCHAR'),
	COMPANY_NAME string(256) OPTIONS(NAMEINSOURCE '"COMPANY_NAME"', NATIVE_TYPE 'VARCHAR'),
	CONSTRAINT PRODUCT_PK PRIMARY KEY(ID) OPTIONS(NAMEINSOURCE '"PRODUCT_PK"')
) OPTIONS(NAMEINSOURCE '"ACCOUNTS"."PUBLIC"."PRODUCT"', UPDATABLE 'TRUE');

]]></metadata>
</model>
<model name="h2db_view" type="VIRTUAL">
<property name="imports" value="h2db_source"/>
<metadata type="DDL"><![CDATA[

CREATE VIEW ACCOUNT (
	ACCOUNT_ID integer NOT NULL OPTIONS(NATIVE_TYPE 'INTEGER', UPDATABLE 'FALSE', FIXED_LENGTH 'TRUE'),
	SSN string(10) OPTIONS(NATIVE_TYPE 'CHAR', UPDATABLE 'FALSE', FIXED_LENGTH 'TRUE'),
	STATUS string(10) OPTIONS(NATIVE_TYPE 'CHAR', UPDATABLE 'FALSE', FIXED_LENGTH 'TRUE'),
	TYPE string(10) OPTIONS(NATIVE_TYPE 'CHAR', UPDATABLE 'FALSE', FIXED_LENGTH 'TRUE'),
	DATEOPENED timestamp OPTIONS(NATIVE_TYPE 'TIMESTAMP', UPDATABLE 'FALSE', FIXED_LENGTH 'TRUE'),
	DATECLOSED timestamp OPTIONS(NATIVE_TYPE 'TIMESTAMP', UPDATABLE 'FALSE', FIXED_LENGTH 'TRUE'),
	CONSTRAINT ACCOUNT_PK PRIMARY KEY(ACCOUNT_ID)
) 
AS
	SELECT * FROM h2db_source.ACCOUNT;

CREATE VIEW CUSTOMER (
	SSN string(10) NOT NULL OPTIONS(NATIVE_TYPE 'CHAR', UPDATABLE 'FALSE', FIXED_LENGTH 'TRUE'),
	FIRSTNAME string(64) OPTIONS(NATIVE_TYPE 'VARCHAR', UPDATABLE 'FALSE'),
	LASTNAME string(64) OPTIONS(NATIVE_TYPE 'VARCHAR', UPDATABLE 'FALSE'),
	ST_ADDRESS string(256) OPTIONS(NATIVE_TYPE 'VARCHAR', UPDATABLE 'FALSE'),
	APT_NUMBER string(32) OPTIONS(NATIVE_TYPE 'VARCHAR', UPDATABLE 'FALSE'),
	CITY string(64) OPTIONS(NATIVE_TYPE 'VARCHAR', UPDATABLE 'FALSE'),
	STATE string(32) OPTIONS(NATIVE_TYPE 'VARCHAR', UPDATABLE 'FALSE'),
	ZIPCODE string(10) OPTIONS(NATIVE_TYPE 'VARCHAR', UPDATABLE 'FALSE'),
	PHONE string(15) OPTIONS(NATIVE_TYPE 'VARCHAR', UPDATABLE 'FALSE'),
	CONSTRAINT CUSTOMER_PK PRIMARY KEY(SSN)
) 
AS
	SELECT * FROM h2db_source.CUSTOMER;

CREATE VIEW PRODUCT (
	ID integer NOT NULL OPTIONS(NATIVE_TYPE 'INTEGER', UPDATABLE 'FALSE', FIXED_LENGTH 'TRUE'),
	SYMBOL string(16) OPTIONS(NATIVE_TYPE 'VARCHAR', UPDATABLE 'FALSE'),
	COMPANY_NAME string(256) OPTIONS(NATIVE_TYPE 'VARCHAR', UPDATABLE 'FALSE'),
	CONSTRAINT PRODUCT_PK PRIMARY KEY(ID)
) 
AS
	SELECT * FROM h2db_source.PRODUCT;

]]></metadata>
</model>
<model name="id_model" type="VIRTUAL">
<property name="imports" value="person_source"/>
<metadata type="DDL"><![CDATA[

CREATE VIEW ACCOUNT (
	ACCOUNT_ID integer NOT NULL OPTIONS(NATIVE_TYPE 'INTEGER', UPDATABLE 'FALSE', FIXED_LENGTH 'TRUE'),
	SSN string(10) OPTIONS(NATIVE_TYPE 'CHAR', UPDATABLE 'FALSE', FIXED_LENGTH 'TRUE'),
	STATUS string(10) OPTIONS(NATIVE_TYPE 'CHAR', UPDATABLE 'FALSE', FIXED_LENGTH 'TRUE'),
	TYPE string(10) OPTIONS(NATIVE_TYPE 'CHAR', UPDATABLE 'FALSE', FIXED_LENGTH 'TRUE'),
	DATEOPENED timestamp OPTIONS(NATIVE_TYPE 'TIMESTAMP', UPDATABLE 'FALSE', FIXED_LENGTH 'TRUE'),
	DATECLOSED timestamp OPTIONS(NATIVE_TYPE 'TIMESTAMP', UPDATABLE 'FALSE', FIXED_LENGTH 'TRUE'),
	CONSTRAINT ACCOUNT_PK PRIMARY KEY(ACCOUNT_ID)
) 
AS
	SELECT * FROM h2db_view.ACCOUNT;

CREATE VIEW CUSTOMER (
	SSN string(10) NOT NULL OPTIONS(NATIVE_TYPE 'CHAR', UPDATABLE 'FALSE', FIXED_LENGTH 'TRUE'),
	FIRSTNAME string(64) OPTIONS(NATIVE_TYPE 'VARCHAR', UPDATABLE 'FALSE'),
	LASTNAME string(64) OPTIONS(NATIVE_TYPE 'VARCHAR', UPDATABLE 'FALSE'),
	ST_ADDRESS string(256) OPTIONS(NATIVE_TYPE 'VARCHAR', UPDATABLE 'FALSE'),
	APT_NUMBER string(32) OPTIONS(NATIVE_TYPE 'VARCHAR', UPDATABLE 'FALSE'),
	CITY string(64) OPTIONS(NATIVE_TYPE 'VARCHAR', UPDATABLE 'FALSE'),
	STATE string(32) OPTIONS(NATIVE_TYPE 'VARCHAR', UPDATABLE 'FALSE'),
	ZIPCODE string(10) OPTIONS(NATIVE_TYPE 'VARCHAR', UPDATABLE 'FALSE'),
	PHONE string(15) OPTIONS(NATIVE_TYPE 'VARCHAR', UPDATABLE 'FALSE'),
	Name string(4000) OPTIONS(UPDATABLE 'FALSE'),
	Nationality string(4000) OPTIONS(UPDATABLE 'FALSE'),
	DOB string(4000) OPTIONS(UPDATABLE 'FALSE'),
	CONSTRAINT CUSTOMER_PK PRIMARY KEY(SSN)
) 
AS
	SELECT h2db_view.CUSTOMER.SSN, h2db_view.CUSTOMER.FIRSTNAME, h2db_view.CUSTOMER.LASTNAME, h2db_view.CUSTOMER.ST_ADDRESS, h2db_view.CUSTOMER.APT_NUMBER, h2db_view.CUSTOMER.CITY, h2db_view.CUSTOMER.STATE, h2db_view.CUSTOMER.ZIPCODE, h2db_view.CUSTOMER.PHONE, person_view.person_table.Name, person_view.person_table.Nationality, person_view.person_table.DOB FROM h2db_view.CUSTOMER, person_view.person_table WHERE h2db_view.CUSTOMER.SSN = person_view.person_table.SSN;

CREATE VIEW PRODUCT (
	ID integer NOT NULL OPTIONS(NATIVE_TYPE 'INTEGER', UPDATABLE 'FALSE', FIXED_LENGTH 'TRUE'),
	SYMBOL string(16) OPTIONS(NATIVE_TYPE 'VARCHAR', UPDATABLE 'FALSE'),
	COMPANY_NAME string(256) OPTIONS(NATIVE_TYPE 'VARCHAR', UPDATABLE 'FALSE'),
	CONSTRAINT PRODUCT_PK PRIMARY KEY(ID)
) 
AS
	SELECT * FROM h2db_view.PRODUCT;

]]></metadata>
</model>
</vdb>

